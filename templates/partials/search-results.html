{% extends 'partials/index.html' %}
{% block content %}
    <script type="text/javascript">
        function redirectToPlayer(id){
            window.location.href = "/clients/" + id + "/contact/"
        }
    </script>
    {% if not messages %}
        <div class="alert" style="border:solid 1px #dddddd">
            <div class="pure-g">
                <div class="pure-u-7-8">
                     Showing results for <strong style="color:#4ED1AA">{% if query != 'browse' and query != ''%} "{{ query }}" {% else %} "all" {% endif %}</strong>
                </div>
{#                <div class="pure-u-1-8">#}
{#                    <strong>Sort By:</strong>#}
{#                    <select title="sort" style="display:inline">#}
{#                        <option value="first_name">First Name</option>#}
{#                        <option value="last_name">Last Name</option>#}
{#                        <option value="id">ID</option>#}
{#                        <option value="email">Email</option>#}
{#                    </select>#}
{#                </div>#}
            </div>
        </div>
        <div class="client-info">
            {% for client in clients|dictsort:'first_name' %}
                <form>
                    <fieldset>
                        <legend><a href="/clients/{{ client.id }}">{{ client.get_full_name }}</a></legend>
                        <div class="pure-u-1">
                            <p>{{ client.email }}{% if client.client.address %} | {{ client.client.address }}{% endif %}
                                | {% if client.is_active %}Active {% else %}Inactive {% endif %} |
                                <span class="fa fa-envelope-o edit-button" onclick="redirectToPlayer({{ client.id }})"></span> <a href="/clients/{{ client.id }}/contact" style="color:inherit">Email</a>
                            </p>
                        </div>
                        <div class="pure-u-1">
                            <span class="fa fa-file-pdf-o {{ client.client.nda_status }}"></span> NDA status: <strong class="{{ client.client.nda_status }}">{{ client.client.nda_status|capfirst }}</strong>
                        </div>
                        <div class="pure-u-1">
                            <span class="fa fa-file-pdf-o {{ client.client.statement_of_work_status }}"></span> Statement Of Work Status: <strong class="{{ client.client.statement_of_work_status }}">{{ client.client.statement_of_work_status|capfirst }}</strong>
                        </div>
                        <div class="pure-u-1">
                            <span class="fa fa-file-pdf-o {{ client.client.consulting_agreement_status }}"></span> Consulting Agreement Status: <strong class="{{ client.client.consulting_agreement_status }}">{{ client.client.consulting_agreement_status|capfirst }}</strong>
                        </div>
                    </fieldset>
                </form>
            {% endfor %}
        </div>
        {% elif query != "browse" %}
            <div class="centered-container">
                <div class="centered">
                    <div class="floating-control-panel">
                        <h1>Oops! We couldn't find {{ query }}.</h1>
                        <p>Please try modifying your search.</p>
                         <form name="search" class="pure-form pure-form-stacked" action="/accounts/search/" method="post">
                            <fieldset>
                                <div class="pure-g">
                                     <div class="pure-u-1">
                                         <div class="search">
                                             <span class="fa fa-search" onclick="search.submit()"></span>
                                             <input type="text" class="pure-u-1" name="email" placeholder="Search for a client...">
                                             {% csrf_token %}
                                             <input type="submit" value="">
                                         </div>
                                     </div>
                                </div>
                            </fieldset>
                         </form>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="centered-container">
                <div class="centered">
                    <div class="floating-control-panel">
                        <h1>Uh oh! We couldn't find any users.</h1>
                        <p>Please contact the system administrator.</p>
                    </div>
                </div>
            </div>
    {% endif %}
{#    {% for client in clients %}#}
{#        <a href="/clients/{{ client.id }}">{{ client }}</a>#}
{#    {% endfor %}#}
{% endblock content %}